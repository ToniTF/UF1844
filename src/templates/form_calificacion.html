{% extends 'base.html' %}

{% block title %}Nueva Calificación{% endblock %}

{% block content %}
<div class="card">
    <div class="card-header">
        <h2>Registrar Nueva Calificación</h2>
    </div>
    <div class="card-body">
        <form method="POST" class="needs-validation" novalidate>
            <div class="form-group">
                <label for="estudiante_id">Estudiante:</label>
                <select class="form-control" id="estudiante_id" name="estudiante_id" required>
                    <option value="">Seleccione un estudiante</option>
                    {% for estudiante in estudiantes %}
                        <option value="{{ estudiante.id }}">{{ estudiante.nombre }} {{ estudiante.apellidos }}</option>
                    {% endfor %}
                </select>
                <div class="invalid-feedback">
                    Por favor seleccione un estudiante.
                </div>
            </div>

            <div class="form-group">
                <label for="asignatura_id">Asignatura:</label>
                <select class="form-control" id="asignatura_id" name="asignatura_id" required>
                    <option value="">Seleccione una asignatura</option>
                    {% for asignatura in asignaturas %}
                        <option value="{{ asignatura.id }}">{{ asignatura.nombre }}</option>
                    {% endfor %}
                </select>
                <div class="invalid-feedback">
                    Por favor seleccione una asignatura.
                </div>
            </div>

            <div class="form-group">
                <label for="nota">Nota:</label>
                <input type="number" class="form-control" id="nota" name="nota" 
                       min="0" max="10" step="0.1" required>
                <div class="invalid-feedback">
                    Por favor ingrese una nota válida (entre 0 y 10).
                </div>
            </div>

            <div class="form-group">
                <button type="submit" class="btn btn-success">Guardar</button>
                <a href="{{ url_for('listar_calificaciones') }}" class="btn btn-secondary">Cancelar</a>
            </div>
        </form>
    </div>
</div>
{% endblock %}